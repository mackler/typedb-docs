= Define query guide
:Summary: How to define a schema for a TypeDB database.
:keywords: typedb, typeql, schema, define, query, send, run, execute
:pageTitle: Define query guide
:experimental:

This guide covers defining a schema of a TypeDB database.
Before proceeding,
make sure you have xref:guides::installation/overview.adoc[installed] TypeDB and one of the TypeDB clients
and have read xref:guides::connection/overview.adoc[how to connect] with the chosen client.

== Define query

To define a schema of a database, use a xref:typeql::schema/define.adoc[Define query] written in TypeQL.

[#_example]
.Define query example
[,typeql]
----
define

credential sub attribute, value string;
full-name sub attribute, value string;

subject sub entity,
    abstract,
    owns credential;
user sub subject;
person sub user, owns full-name;
----

The above example creates two attribute types and three entity types.
To be able to insert data with these types in mind,
you need to send this Define query to TypeDB and commit the transaction.
A Define query is validated for syntax, and the resulted schema is validated for consistency.

== How to send a Define query
[#_send_define_query]

To send a query to TypeDB, use any TypeDB client: TypeDB Studio, TypeDB Console, or language-specific drivers.
Select a TypeDB client, and send the above query example, using the instructions provided below.

[tabs]
====
Console::
+
--
. xref:typedb::connecting/console.adoc#_connect_to_typedb[Connect to TypeDB].
. Open a `schema` session and `write` transaction to a new/empty database, for example:
+
[,bash]
----
transaction db1 schema write
----
. Copy-paste the <<_example,query example>> above and push btn:[Enter] *twice*.
. Commit the changes made in the transaction:
+
[,bash]
----
commit
----
--

Studio::
+
--
. xref:guides::connection/studio.adoc[Connect to TypeDB] and
xref:guides::connection/studio.adoc#_select_a_project_directory[select a project directory].
. Select a new/empty database from a drop-down list in the top toolbar next to the database icon
image:home::studio-icons/database.png[].
. Switch to the `schema` session and `write` transaction types in the top toolbar.
. Create a new tab in TypeDB Studio text editor, copy-paste the <<_example,query example>> above.
. Execute the query by clicking on the btn:[Run Query] (image:home::studio-icons/run.png[]) button.
. Commit the changes with the btn:[Commit transaction] (image:home::studio-icons/commit.png[]) button.
--

Rust::
+
--
.Define schema query
[,rust]
----
let typeql_define_query = "define
                        credential sub attribute, value string;
                        full-name sub attribute, value string;
                        subject sub entity,
                            abstract,
                            owns credential;
                        user sub subject;
                        person sub user, owns full-name;";
tx.query().define(&typeql_define_query).resolve()?;
tx.commit().resolve()?;
----
//#todo Add session and transaction management?
--

Python::
+
--
.Define schema query
[,python]
----
typeql_define_query = "define" \
                    "credential sub attribute, value string; " \
                    "full-name sub attribute, value string; " \
                    "subject sub entity," \
                    "    abstract," \
                    "    owns credential;" \
                    "user sub subject;" \
                    "person sub user, owns full-name;"
transaction.query.define(typeql_define_query)
transaction.commit()
----
--

Java::
+
--
.Define schema query
[,java]
----
String typeqlDefineQuery = """
                        define
                        credential sub attribute, value string;
                        full-name sub attribute, value string;
                        subject sub entity,
                            abstract,
                            owns credential;
                        user sub subject;
                        person sub user, owns full-name;
                        """;
writeTransaction.query().define(typeqlDefineQuery);
writeTransaction.commit();
----
--

Node.js::
+
--
.Define schema query
[,js]
----
const typeql_define_query = `define
                            credential sub attribute, value string;
                            full-name sub attribute, value string;
                            subject sub entity,
                                abstract,
                                owns credential;
                            user sub subject;
                            person sub user, owns full-name;
                            `;
await transaction.query.define(typeql_define_query);
await transaction.commit();
----
--
====

== Learn more

After you have defined a schema, you can use
xref:guides::data/overview.adoc[] queries.

If you don't have your own schema ready yet, feel free to use the
https://github.com/vaticle/typedb-docs/blob/master/typedb-src/modules/ROOT/attachments/iam-schema.tql[IAM schema,window=_blank].
For more information about the IAM schema, see the xref:typedb::tutorials/iam-schema.adoc[] page.
